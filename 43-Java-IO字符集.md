# Java IO 字符集

计算机存储规则回顾：

在计算机中，任意数据都是以二进制的形式来存储的。

二进制就是以 0、1 组成的数据。

- 其中一个 0、或 1，称为一个 bit 比特位；
- 八个比特位分为一组，就是一个字节，可以存储 2^8^ 即 256 个数据。

字节是计算机中最小的存储单元。

计算机在存储一个英文字母时，只需要一个字节即可。

## 一、ASCLL 字符集

共有 128 个字符，所以只用一个字节（最大存储 256 个数据）就可以存储。

字符 a，在计算机中的存储过程，如下图所示：

![ASCLL编码规则](NodeAssets/ASCLL编码规则.jpg)

ASCLL 编码规则：前面补 0，补齐 8 位。

ASCLL 解码规则：直接转成十进制。

## 二、其它字符集

汉字，也需要一张类似于 ASCLL 的码表，将所有汉字字符，与唯一的一个数字对应。

所以出现了：

- GB2312 字符集编码，是 1981 年 5 月 1 日 发布的简体中文汉字编码国家标准。收录 7445 个图形字符，其中包括 6763 个汉字。
- BIG5 字符集编码，是 1984 年实施的台湾地区繁体中文标准字符集，共收录 13053 个中文字。
- GBK 字符集编码，是 2000 年 3 月 17 日发布，收录 21003 个汉字，包含国家标准 GB13000-1 中的全部中日韩汉字，有 BIG5 编码中的所有汉字。
- Unicode 字符集编码，国际标准字符集，它将世界各种语言的每个字符定义一个唯一的编码，以满足跨语言、跨平台的文本信息转化。

> Windows 操作系统，简体中文版，默认使用的就是 GBK 字符集编码；系统别称是 ANSI。

## 三、GBK 字符集

GBK 字符集，完全兼容 ASCLL 字符集。

### 1.GBK 字符集中的英文字母

GBK 字符集，英文字母的存储、读取，与 ASCLL 字符集一样：

![ASCLL编码规则](NodeAssets/ASCLL编码规则.jpg)

GBK 英文字母编码规则：前面补 0，补齐 8 位。

GBK 英文字母解码规则：直接转成十进制。

### 2.GBK 字符集中的汉字

GBK 字符集，汉字的存储：过程如下：

![GBK字符集编码规则](NodeAssets/GBK字符集编码规则.jpg)

GBK 汉字编码规则：

- 规则 1：一个汉字，使用 2 个字节存储，分别是**高位字节**、**低位字节**。
- 规则 2：高位字节二进制，一定以 1 开头，转成十进制后是一个负数；这是为了与英文字母进行区分。

### 3.GBK 编码规则练习

下方是按照 GBK 字符集中编码后的二进制，请说出有几个中文，几个英文。

- 第一组：10111010 10111010（汉）01100001（a）
- 第二组：01100001（a）01100010（b）01100011（c）
- 第三组：10111010 11000011（好）11001111 11101011（想）10111110 10110010（静）10111110 10110010（静）

## 四、Unicode 字符集

Unicode 字符集，完全兼容 ASCLL 字符集。它有很多的编码规则，比如：

- UTF-16 编码规则：使用 2-4 个字节保存字符。
- UTF-32 编码规则，固定使用 4 个字节保存字符。
- UTF-8 编码规则：用 1-4 个字节保存（

> UTF（Unicode Transfer Format）

其中，UTF-8 编码规则：用的最多。

- 英文字符（ASCLL 字符集中的字符），使用 1 个字节，二进制第一位是 0，转成十进制是正数；
- 中文字符，使用 3 个字节。二进制第一位是 1，第一个字节转成十进制是负数。

| UTF-8 编码方式（二进制）               |
| -------------------------------------- |
| 0xxxxxxx（ASCLL 码）                   |
| 110xxxxx 10xxxxxxx                     |
| 1110xxxx  10xxxxxxx 10xxxxxxx          |
| 11110xxx 10xxxxxxx 10xxxxxxx 10xxxxxxx |

### 1.UTF-8 编码规则中的英文

UTF-8 字符集，英文字母的存储、读取，与 ASCLL 字符集一样

![ASCLL编码规则](NodeAssets/ASCLL编码规则.jpg)

### 2.UTF-8 编码规则中的汉字

UTF-8 字符集，中文汉字的存储、读取，过程如下

- 第一个字节的首位，一定是 1；：

![UTF8编码规则](NodeAssets/UTF8编码规则.jpg)

### 3.UTF-8 编码规则练习

UTF-8 不是字符集，它是 Unicode 字符集的一种编码规则。

以下是 Unicode 字符集，利用 UTF-8 编码之后的二进制数据，请说出有几个中文，几个英文；

- 第一组：01110111（w）01100101（e）01100101（e）
- 第二组：01100001（a）01101010（i）11100100 10111101 10100000（你）11100101 10010011 10100110（哦）

## 五、乱码的产生

乱码产生的原因，有两个：

- 原因一：读取时，未读完整个汉字字符；
- 原因二：编码和解码的方式不统一。
