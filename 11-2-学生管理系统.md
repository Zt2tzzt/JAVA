# 学生管理系统

## 一、需求概述

采取控制台的方式去书写学生管理系统。

## 二、需求分析

### 1.初始菜单需求

```java
"-------------欢迎来到黑马学生管理系统----------------"
"1：添加学生"
"2：删除学生"
"3：修改学生"
"4：查询学生"
"5：退出"
"请输入您的选择:"
```

### 2.学生类需求

属性：id、姓名、年龄、家庭住址

### 3.添加功能需求

键盘录入每一个学生信息并添加，需要满足以下要求：

- id 唯一

### 4.删除功能需求

键盘录入要删除的学生 id，需要满足以下要求：

- id 存在删除
- id 不存在，需要提示不存在，并回到初始菜单

### 5.修改功能需求

键盘录入要修改的学生 id，需要满足以下要求：

- id 存在，继续录入其他信息
- id 不存在，需要提示不存在，并回到初始菜单

### 6.查询功能需求

打印所有的学生信息，需要满足以下要求

- 如果没有学生信息，提示：当前无学生信息，请添加后再查询
- 如果有学生信息，需要按照以下格式输出。（不用过于纠结对齐的问题）

```java
id    姓名    年龄    家庭住址
heima001  张三    23    南京
heima002  李四    24    北京
heima003  王五    25    广州
heima004  赵六    26    深圳
```

## 三、代码实现

> 代码开发，先阅读需求文档，并依据需求文档，画出业务流程图。

### 1.初始菜单实现

demo-project/base-code/Day11-StudentSystem/src/Main.java

```java
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        // 给 while 循环体标号为 loop，方便 break 关键字推出循环体。
        loop:
        while (true) {
            System.out.println("”-------------欢迎来到北宇治学生管理系统----------------“");
            System.out.println("”1：添加学生“");
            System.out.println("”2：删除学生“");
            System.out.println("”3：修改学生“");
            System.out.println("”4：查询学生“");
            System.out.println("”5：退出“");
            System.out.println("”请输入您的选择:“");
            String input = sc.next();

            switch (input) {
                case "1" -> System.out.println("”添加学生“");
                case "2" -> System.out.println("”删除学生“");
                case "3" -> System.out.println("”修改学生“");
                case "4" -> System.out.println("”查询学生“");
                case "5" -> {
                    System.out.println("”退出“");
                    System.exit(0);
                    break loop;
                }
                default -> System.out.println("”输入错误“");
            }
        }

    }
}
```

#### 1.循环体标号

给 while 循环体标号为 `loo`p，方便 `break` 语句作用于循环体。

```java
loop: while (true) {
    // ...
    switch (input) {
        case "4" -> // ...
        case "5" -> break loop;
        default -> System.out.println("”输入错误“");
    }
}
```

#### 2.停止 JVM 虚拟机运行

该语句 `System.exit(0);` 可以停止 JVM 虚拟机运行。

```java
System.exit(0);
```

### 2.学生类实现

demo-project/base-code/Day11-StudentSystem/src/com/kkcf/student/Student.java

```java
package com.kkcf.student;

public class Student {
    private String id;
    private String name;
    private int age;
    private String address;

    public Student() {
    }

    public Student(String id, String name, int age, String address) {
        this.id = id;
        this.name = name;
        this.age = age;
        this.address = address;
    }

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    @Override
    public String toString() {
        return "Student{" +
                "id='" + id + '\'' +
                ", name='" + name + '\'' +
                ", age=" + age +
                ", address='" + address + '\'' +
                '}';
    }
}
```

### 3.添加功能实现

demo-project/base-code/Day11-StudentSystem/src/Main.java

```java
/**
 * 此方法用于：添加学生
 *
 * @param stus
 */
public static void addStu(ArrayList<Student> stus) {
    Scanner sc = new Scanner(System.in);

    // 输入学生 id
    String id = "";
    do {
        System.out.print("请输入学生id:");
        id = sc.next();
        if (findStuId(stus, id) >= 0)
            System.out.print("该id已存在，请重新输入！");
        else
            break;
    } while (true);

    // 输入学生姓名
    System.out.print("请输入学生姓名:");
    String name = sc.next();

    // 输入学生年龄
    String ageStr = "";
    do {
        System.out.print("请输入学生年龄:");
        ageStr = sc.next();

        if (!checkNum(ageStr) && str2Num(ageStr) < 100)
            System.out.print("输入值不合法，请重新输入！");
        else
            break;
    } while (true);
    int age = str2Num(ageStr);

    // 输入学生家庭住址
    System.out.print("请输入学生家庭住址:");
    String address = sc.next();

    // 添加学生
    stus.add(new Student(id, name, age, address));
    System.out.println("”添加学生成功“");
}

/**
 * 此函数用于，查找学生id
 *
 * @param stus
 * @param id
 * @return
 */
public static int findStuId(ArrayList<Student> stus, String id) {
    for (int i = 0; i < stus.size(); i++)
        if (stus.get(i).getId().equals(id))
            return i;

    return -1;
}

/**
 * 此方法用于：判断字符串是否由数字组成
 *
 * @param str
 * @return
 */
public static boolean checkNum(String str) {
    for (int i = 0; i < str.length(); i++) {
        char c = str.charAt(i);

        if (c < '0' || c > '9')
            return false;
    }

    return true;
}

/**
 * 此函数用于：将字符串转换为数字
 *
 * @param str
 * @return
 */
public static int str2Num(String str) {
    int num = 0;

    for (int i = 0; i < str.length(); i++) {
        char c = str.charAt(i);

        if (c >= '0' && c <= '9')
            num = num * 10 + (c - '0');
        else
            return -1;
    }

    return num;
}
```

### 6.查询功能实现

demo-project/base-code/Day11-StudentSystem/src/Main.java

```java
/**
 * 此函数用于，显示学生信息
 *
 * @param stus
 */
public static void showStu(ArrayList<Student> stus) {
    if (stus.isEmpty()) {
        System.out.println("当前无学生信息，请添加后再查询！");
        return;
    }

    System.out.println("id\t\t姓名\t\t年龄\t\t家庭住址");
    for (Student stu : stus)
        System.out.println(stu.getId() + "\t\t" + stu.getName() + "\t\t" + stu.getAge() + "\t\t" + stu.getAddress());
}
```
